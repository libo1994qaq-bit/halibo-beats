<!doctype html>
<html>
  <head prefix="og:http://ogp.me/ns#">
    <meta charset="utf-8" />
    <!-- å…³é”®ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„viewportè®¾ç½® -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta http-equiv="cleartype" content="on" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#000000" />
    
    <!-- iOS å…¨å±è®¾ç½® -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="HALIBO Beats" />
    
    <!-- ä¸­æ–‡æè¿° -->
    <meta name="description" content="æ•²å‡»èŠ‚å¥ï¼ŒæŒ‘æˆ˜æé™ï¼HALIBO Beats - æ²‰æµ¸å¼éŸ³ä¹èŠ‚å¥æ¸¸æˆã€‚" />

    <link rel="icon" href="./favicon.svg" type="image/svg+xml" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="apple-touch-icon" href="./icon-256.png" />

    <!-- ç½‘ç«™ä¿¡æ¯ -->
    <meta property="og:url" content="https://libo1994qaq-bit.github.io/halibo-beats/" />
    <meta property="og:title" content="HALIBO Beats" />
    <meta property="og:description" content="æ•²å‡»èŠ‚å¥ï¼ŒæŒ‘æˆ˜æé™ï¼HALIBO Beats - æ²‰æµ¸å¼éŸ³ä¹èŠ‚å¥æ¸¸æˆã€‚" />
    <meta property="og:image" content="https://libo1994qaq-bit.github.io/halibo-beats/ogp.png" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="HALIBO Beats" />
    <meta name="twitter:card" content="summary_large_image" />

    <title>HALIBO Beats</title>
    
    <style>
      /* åŸºç¡€æ ·å¼ - å…³é”®ä¿®å¤ï¼šç¡®ä¿100%å¡«å…… */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #000;
        font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        color: #fff;
        /* å…³é”®ï¼šç¡®ä¿å…¨å±æ—¶æ²¡æœ‰ç©ºç™½ */
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }

      /* æ¸¸æˆå®¹å™¨ - å…³é”®ä¿®å¤ï¼šç¡®ä¿å…¨å±æ—¶å®Œå…¨å¡«å…… */
      #game-container {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        /* å…³é”®ï¼šç¡®ä¿æ²¡æœ‰æº¢å‡ºæˆ–ç©ºç™½ */
        overflow: hidden;
      }

      #game-app {
        width: 100%;
        height: 100%;
        background: #000;
        /* å…³é”®ï¼šç¡®ä¿æ¸¸æˆç”»å¸ƒå¡«å……æ•´ä¸ªåŒºåŸŸ */
        position: absolute;
        top: 0;
        left: 0;
        /* é˜²æ­¢å†…å®¹è¢«è£å‰ª */
        object-fit: contain;
      }

      /* ä¿®å¤ï¼šå…¨å±æ—¶çš„ç‰¹æ®Šæ ·å¼ */
      :fullscreen #game-container,
      :-webkit-full-screen #game-container,
      :-moz-full-screen #game-container,
      :-ms-fullscreen #game-container {
        width: 100vw !important;
        height: 100vh !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        overflow: hidden !important;
        background: #000 !important;
      }

      :fullscreen #game-app,
      :-webkit-full-screen #game-app,
      :-moz-full-screen #game-app,
      :-ms-fullscreen #game-app {
        width: 100% !important;
        height: 100% !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        background: #000 !important;
      }

      /* æ¨ªå±æç¤º - æ›´é…·çš„æ ·å¼ */
      #landscape-warning {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        text-align: center;
        padding: 20px;
        animation: gradientBG 10s ease infinite;
        background-size: 400% 400%;
      }

      @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      .phone-icon {
        width: 150px;
        height: 250px;
        position: relative;
        margin-bottom: 30px;
        animation: phoneRotate 3s ease-in-out infinite;
      }

      .phone-body {
        width: 120px;
        height: 220px;
        background: #111;
        border-radius: 25px;
        position: relative;
        border: 8px solid #333;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      }

      .phone-screen {
        width: 100px;
        height: 160px;
        background: #222;
        border-radius: 15px;
        position: absolute;
        top: 20px;
        left: 10px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .music-bar {
        width: 80%;
        height: 4px;
        background: linear-gradient(90deg, #ff0080, #00ccff);
        margin: 3px 0;
        transform-origin: left;
        animation: musicPulse 1s ease-in-out infinite;
        animation-delay: calc(var(--i) * 0.1s);
      }

      @keyframes musicPulse {
        0%, 100% { transform: scaleX(0.3); }
        50% { transform: scaleX(1); }
      }

      @keyframes phoneRotate {
        0%, 100% { transform: rotate(0deg); }
        25% { transform: rotate(-90deg); }
        50% { transform: rotate(-90deg); }
        75% { transform: rotate(-90deg); }
      }

      .landscape-text {
        font-size: 28px;
        margin-bottom: 15px;
        color: #ff0080;
        text-shadow: 0 0 10px rgba(255, 0, 128, 0.5);
        animation: textGlow 2s ease-in-out infinite;
      }

      @keyframes textGlow {
        0%, 100% { text-shadow: 0 0 10px rgba(255, 0, 128, 0.5); }
        50% { text-shadow: 0 0 20px rgba(255, 0, 128, 0.8), 0 0 30px rgba(0, 204, 255, 0.6); }
      }

      .landscape-subtext {
        font-size: 16px;
        margin-bottom: 30px;
        color: #00ccff;
        max-width: 300px;
        line-height: 1.5;
      }

      .continue-button {
        padding: 15px 35px;
        font-size: 18px;
        font-weight: bold;
        background: linear-gradient(45deg, #ff0080, #00ccff);
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 20px rgba(255, 0, 128, 0.4);
        position: relative;
        overflow: hidden;
      }

      .continue-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(255, 0, 128, 0.6);
      }

      .continue-button:active {
        transform: translateY(-1px);
      }

      .continue-button:after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: 0.5s;
      }

      .continue-button:hover:after {
        left: 100%;
      }

      /* å…¨å±æŒ‰é’® - ä¼˜åŒ–ç‰ˆ */
      #fullscreen-button {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 100;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: 2px solid #00ccff;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 12px;
        cursor: pointer;
        display: none;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
        font-weight: bold;
        letter-spacing: 1px;
        text-transform: uppercase;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
      }

      #fullscreen-button:hover {
        background: rgba(0, 204, 255, 0.3);
        border-color: #ff0080;
        transform: scale(1.1);
      }

      #fullscreen-button.fullscreen-active {
        background: rgba(255, 0, 128, 0.3);
        border-color: #ff0080;
      }

      /* å…³é”®ä¿®å¤ï¼šå…¨å±æ—¶éšè—å…¨å±æŒ‰é’® */
      :fullscreen #fullscreen-button,
      :-webkit-full-screen #fullscreen-button,
      :-moz-full-screen #fullscreen-button,
      :-ms-fullscreen #fullscreen-button {
        display: none !important;
      }

      /* è¿·ä½ æç¤ºæ¡ - ä¼˜åŒ–ï¼š5ç§’åè‡ªåŠ¨æ¶ˆå¤± */
      .mini-tip {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 204, 255, 0.2);
        border: 1px solid rgba(0, 204, 255, 0.5);
        color: #00ccff;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 12px;
        display: none;
        z-index: 150;
        backdrop-filter: blur(5px);
        animation: tipPulse 3s ease-in-out infinite;
        /* ç¡®ä¿æç¤ºæ¡ä¸ä¼šå¤ªé•¿ */
        max-width: 90%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      @keyframes tipPulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }

      /* æ·»åŠ æ·¡å‡ºåŠ¨ç”» */
      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }

      .mini-tip.fade-out {
        animation: fadeOut 0.5s ease forwards;
      }

      /* æ¨ªå±æ¨¡å¼ä¸‹çš„æ ·å¼è°ƒæ•´ */
      @media (orientation: landscape) {
        #landscape-warning {
          display: none !important;
        }
        
        #fullscreen-button {
          display: block;
        }
        
        .mini-tip {
          display: block;
          /* å…³é”®ï¼šæ¨ªå±æ—¶æç¤ºæ¡æ˜¾ç¤º5ç§’ */
          animation: tipPulse 3s ease-in-out infinite, fadeOut 0.5s ease 5s forwards;
        }
      }

      /* ç«–å±æ¨¡å¼ä¸‹çš„ç‰¹æ®Šå¤„ç† */
      @media (orientation: portrait) {
        #landscape-warning {
          display: flex;
        }
        
        #fullscreen-button {
          display: none;
        }
        
        .mini-tip {
          display: none;
        }
      }

      /* å°å±å¹•é€‚é… */
      @media (max-width: 480px) {
        .phone-icon {
          width: 120px;
          height: 200px;
        }
        
        .phone-body {
          width: 90px;
          height: 170px;
        }
        
        .phone-screen {
          width: 75px;
          height: 120px;
        }
        
        .landscape-text {
          font-size: 22px;
        }
        
        .landscape-subtext {
          font-size: 14px;
          padding: 0 20px;
        }
        
        .continue-button {
          padding: 12px 25px;
          font-size: 16px;
        }
        
        #fullscreen-button {
          padding: 6px 10px;
          font-size: 10px;
          right: 5px;
          top: 5px;
        }
        
        .mini-tip {
          font-size: 10px;
          padding: 6px 12px;
          bottom: 10px;
        }
      }

      /* æ‰‹æœºæ¨ªå±ç‰¹æ®Šä¼˜åŒ– */
      @media (orientation: landscape) and (max-height: 600px) {
        .mini-tip {
          bottom: 5px;
          font-size: 10px;
          padding: 4px 8px;
        }
        
        #fullscreen-button {
          padding: 4px 8px;
          font-size: 10px;
          top: 5px;
          right: 5px;
        }
      }

      /* æ¸¸æˆåŠ è½½æç¤º */
      .game-loading {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #00ccff;
        font-size: 18px;
        text-align: center;
        z-index: 99;
        display: none;
      }

      .loading-dots {
        display: inline-block;
        animation: dots 1.5s steps(5, end) infinite;
      }

      @keyframes dots {
        0%, 20% { content: '.'; }
        40% { content: '..'; }
        60%, 100% { content: '...'; }
      }

      /* éšè—æ»šåŠ¨æ¡ */
      ::-webkit-scrollbar {
        display: none;
      }
      
      /* iOS Safari å…¨å±ä¿®å¤ */
      @supports (-webkit-touch-callout: none) {
        html, body {
          height: -webkit-fill-available;
        }
        
        #game-container {
          height: -webkit-fill-available;
        }
      }
    </style>
    
    <script>
      // æ£€æµ‹æ˜¯å¦åœ¨å¾®ä¿¡æµè§ˆå™¨ä¸­
      (function() {
        function isWechatBrowser() {
          const ua = navigator.userAgent.toLowerCase();
          return ua.indexOf('micromessenger') !== -1;
        }
        
        if (isWechatBrowser()) {
          window.isWechat = true;
        }
      })();
    </script>
  </head>

  <body>
    <!-- æ¨ªå±æç¤º - é…·ç‚«ç‰ˆ -->
    <div id="landscape-warning">
      <div class="phone-icon">
        <div class="phone-body">
          <div class="phone-screen">
            <div class="music-bar" style="--i: 0;"></div>
            <div class="music-bar" style="--i: 1;"></div>
            <div class="music-bar" style="--i: 2;"></div>
            <div class="music-bar" style="--i: 3;"></div>
            <div class="music-bar" style="--i: 4;"></div>
            <div class="music-bar" style="--i: 5;"></div>
          </div>
        </div>
      </div>
      <div class="landscape-text">ğŸµ ç¿»è½¬è®¾å¤‡ï¼ŒèŠ‚å¥åŠ å€ï¼</div>
      <div class="landscape-subtext">æ¨ªå±æ¨¡å¼å¯è·å¾—æœ€ä½³æ¸¸æˆä½“éªŒ<br>è®©éŸ³ç¬¦åœ¨æ›´å®½çš„èˆå°ä¸Šé£èˆ</div>
      <button id="continue-portrait-button" class="continue-button">
        æˆ‘çŸ¥é“ï¼Œä½†æˆ‘å°±æƒ³ç«–ç€ç©
      </button>
    </div>
    
    <!-- æ¸¸æˆå®¹å™¨ -->
    <div id="game-container">
      <button id="fullscreen-button">â›¶ å…¨å±</button>
      <div id="game-app"></div>
      <div class="mini-tip">ğŸµ ç«–å±æ¨¡å¼ä¹Ÿèƒ½ç©ï¼Œä½†æ¨ªå±æ›´çˆ½å“¦ï¼</div>
    </div>
    
    <!-- æ¸¸æˆåŠ è½½æç¤º -->
    <div class="game-loading" id="game-loading">
      <div>åŠ è½½èŠ‚å¥ä¸­<span class="loading-dots"></span></div>
    </div>

    <script src="./bundle.js"></script>
    
    <script>
      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
      document.addEventListener('DOMContentLoaded', function() {
        // è·å–DOMå…ƒç´ 
        const landscapeWarning = document.getElementById('landscape-warning');
        const gameContainer = document.getElementById('game-container');
        const continuePortraitButton = document.getElementById('continue-portrait-button');
        const fullscreenButton = document.getElementById('fullscreen-button');
        const gameApp = document.getElementById('game-app');
        const miniTip = document.querySelector('.mini-tip');
        const gameLoading = document.getElementById('game-loading');
        
        // æ£€æµ‹æ˜¯å¦æ¨ªå±
        function isLandscape() {
          return window.innerWidth > window.innerHeight;
        }
        
        // æ£€æŸ¥æ¨ªå±çŠ¶æ€å¹¶æ›´æ–°UI
        function checkOrientation() {
          if (isLandscape()) {
            // æ¨ªå±æ¨¡å¼ - éšè—æç¤ºï¼Œæ˜¾ç¤ºå…¨å±æŒ‰é’®
            landscapeWarning.style.display = 'none';
            fullscreenButton.style.display = 'block';
            miniTip.style.display = 'block';
            
            // 5ç§’åè‡ªåŠ¨éšè—æç¤º
            setTimeout(() => {
              if (miniTip.style.display === 'block') {
                miniTip.classList.add('fade-out');
                setTimeout(() => {
                  miniTip.style.display = 'none';
                  miniTip.classList.remove('fade-out');
                }, 500);
              }
            }, 5000);
          } else {
            // ç«–å±æ¨¡å¼ - æ˜¾ç¤ºæç¤ºï¼Œéšè—å…¨å±æŒ‰é’®
            landscapeWarning.style.display = 'flex';
            fullscreenButton.style.display = 'none';
            miniTip.style.display = 'none';
          }
        }
        
        // ä¿®å¤æ‰‹æœºç«¯å…¨å±é—®é¢˜
        function toggleFullscreen() {
          if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
            // è¿›å…¥å…¨å±
            const element = document.documentElement;
            
            // æ·»åŠ è§†è§‰åé¦ˆ
            fullscreenButton.classList.add('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ é€€å‡º';
            
            // æ˜¾ç¤ºåŠ è½½æç¤º
            gameLoading.style.display = 'block';
            
            // æ‰§è¡Œå…¨å± - ä½¿ç”¨æœ€å…¼å®¹çš„æ–¹å¼
            const requestFullscreen = element.requestFullscreen || 
                                     element.webkitRequestFullscreen || 
                                     element.msRequestFullscreen;
            
            if (requestFullscreen) {
              requestFullscreen.call(element).then(() => {
                console.log('è¿›å…¥å…¨å±æˆåŠŸ');
                
                // å…³é”®ï¼šå…¨å±åå¼ºåˆ¶è°ƒæ•´æ¸¸æˆå®¹å™¨å°ºå¯¸
                setTimeout(() => {
                  gameContainer.style.width = '100vw';
                  gameContainer.style.height = '100vh';
                  gameApp.style.width = '100%';
                  gameApp.style.height = '100%';
                  gameLoading.style.display = 'none';
                }, 100);
              }).catch(err => {
                console.log('å…¨å±è¯·æ±‚å¤±è´¥:', err);
                gameLoading.style.display = 'none';
                fullscreenButton.classList.remove('fullscreen-active');
                fullscreenButton.innerHTML = 'â›¶ å…¨å±';
                
                // å°è¯•å¦ä¸€ç§å…¨å±æ–¹æ³•ï¼ˆé’ˆå¯¹iOSï¼‰
                if (element.webkitRequestFullscreen) {
                  element.webkitRequestFullscreen();
                }
              });
            }
          } else {
            // é€€å‡ºå…¨å±
            fullscreenButton.classList.remove('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ å…¨å±';
            
            const exitFullscreen = document.exitFullscreen || 
                                   document.webkitExitFullscreen || 
                                   document.msExitFullscreen;
            
            if (exitFullscreen) {
              exitFullscreen.call(document).then(() => {
                // é€€å‡ºå…¨å±åæ¢å¤æ­£å¸¸å°ºå¯¸
                gameContainer.style.width = '100%';
                gameContainer.style.height = '100%';
                checkOrientation();
              });
            }
          }
        }
        
        // äº‹ä»¶ç›‘å¬
        continuePortraitButton.addEventListener('click', function() {
          landscapeWarning.style.display = 'none';
          
          // æ·»åŠ ä¸€ä¸ªå°çš„è§†è§‰åé¦ˆ
          this.style.transform = 'scale(0.95)';
          setTimeout(() => {
            this.style.transform = 'scale(1)';
          }, 200);
          
          // æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼ˆ5ç§’åè‡ªåŠ¨æ¶ˆå¤±ï¼‰
          miniTip.textContent = 'ğŸµ ç«–å±æ¨¡å¼ä¹Ÿèƒ½ç©ï¼Œä½†æ¨ªå±æ›´çˆ½å“¦ï¼';
          miniTip.style.display = 'block';
          setTimeout(() => {
            if (miniTip.style.display === 'block') {
              miniTip.classList.add('fade-out');
              setTimeout(() => {
                miniTip.style.display = 'none';
                miniTip.classList.remove('fade-out');
              }, 500);
            }
          }, 5000);
        });
        
        fullscreenButton.addEventListener('click', toggleFullscreen);
        
        // ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–
        document.addEventListener('fullscreenchange', function() {
          if (document.fullscreenElement) {
            fullscreenButton.classList.add('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ é€€å‡º';
            fullscreenButton.style.display = 'none'; // å…¨å±æ—¶éšè—æŒ‰é’®
            miniTip.style.display = 'none';
            
            // å¼ºåˆ¶è°ƒæ•´å°ºå¯¸
            setTimeout(() => {
              gameContainer.style.width = '100vw';
              gameContainer.style.height = '100vh';
            }, 50);
          } else {
            fullscreenButton.classList.remove('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ å…¨å±';
            miniTip.style.display = 'none';
            
            // æ¢å¤æ˜¾ç¤ºå…¨å±æŒ‰é’®ï¼ˆå¦‚æœæ˜¯æ¨ªå±ï¼‰
            setTimeout(() => {
              if (isLandscape()) {
                fullscreenButton.style.display = 'block';
                // æ˜¾ç¤ºæç¤ºï¼ˆ5ç§’åæ¶ˆå¤±ï¼‰
                miniTip.style.display = 'block';
                setTimeout(() => {
                  if (miniTip.style.display === 'block') {
                    miniTip.classList.add('fade-out');
                    setTimeout(() => {
                      miniTip.style.display = 'none';
                      miniTip.classList.remove('fade-out');
                    }, 500);
                  }
                }, 5000);
              }
            }, 100);
          }
        });
        
        document.addEventListener('webkitfullscreenchange', function() {
          if (document.webkitFullscreenElement) {
            fullscreenButton.classList.add('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ é€€å‡º';
            fullscreenButton.style.display = 'none';
            miniTip.style.display = 'none';
          } else {
            fullscreenButton.classList.remove('fullscreen-active');
            fullscreenButton.innerHTML = 'â›¶ å…¨å±';
            miniTip.style.display = 'none';
            
            setTimeout(() => {
              if (isLandscape()) {
                fullscreenButton.style.display = 'block';
                miniTip.style.display = 'block';
                setTimeout(() => {
                  if (miniTip.style.display === 'block') {
                    miniTip.classList.add('fade-out');
                    setTimeout(() => {
                      miniTip.style.display = 'none';
                      miniTip.classList.remove('fade-out');
                    }, 500);
                  }
                }, 5000);
              }
            }, 100);
          }
        });
        
        // ç›‘å¬æ¨ªç«–å±å˜åŒ–
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', function() {
          // æ·»åŠ ä¸€ä¸ªå°çš„å»¶è¿Ÿï¼Œç¡®ä¿æ–¹å‘å·²ç»æ”¹å˜
          setTimeout(checkOrientation, 100);
        });
        
        // é˜²æ­¢è§¦æ‘¸é»˜è®¤è¡Œä¸ºï¼ˆé¿å…ç¼©æ”¾ï¼‰
        document.addEventListener('touchstart', function(e) {
          if (e.touches.length > 1) {
            e.preventDefault();
          }
        }, { passive: false });
        
        document.addEventListener('gesturestart', function(e) {
          e.preventDefault();
        });
        
        // é˜²æ­¢åŒå‡»ç¼©æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
          const now = Date.now();
          if (now - lastTouchEnd <= 300) {
            e.preventDefault();
          }
          lastTouchEnd = now;
        }, false);
        
        // åˆå§‹æ£€æŸ¥
        checkOrientation();
        
        // å¦‚æœå·²ç»æ˜¯æ¨ªå±ï¼Œæ˜¾ç¤ºå…¨å±æŒ‰é’®å’Œæç¤ºï¼ˆ5ç§’åæ¶ˆå¤±ï¼‰
        if (isLandscape()) {
          setTimeout(() => {
            miniTip.style.display = 'block';
            setTimeout(() => {
              if (miniTip.style.display === 'block') {
                miniTip.classList.add('fade-out');
                setTimeout(() => {
                  miniTip.style.display = 'none';
                  miniTip.classList.remove('fade-out');
                }, 500);
              }
            }, 5000);
          }, 1000);
        }
        
        // æ³¨å†ŒService Workerï¼ˆåœ¨ç”¨æˆ·äº¤äº’åï¼‰
        let swRegistered = false;
        
        function registerServiceWorker() {
          if (!swRegistered && 'serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js')
              .then(registration => {
                console.log('Service Worker æ³¨å†ŒæˆåŠŸ');
                swRegistered = true;
              })
              .catch(error => {
                console.log('Service Worker æ³¨å†Œå¤±è´¥:', error);
              });
          }
        }
        
        // ç”¨æˆ·é¦–æ¬¡ç‚¹å‡»æ—¶æ³¨å†Œ
        document.addEventListener('click', function initSW() {
          registerServiceWorker();
          document.removeEventListener('click', initSW);
        });
        
        // æä¾›å…¨å±€å‡½æ•°ä¾›bundle.jsè°ƒç”¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
        window.toggleFullscreen = toggleFullscreen;
        window.checkOrientation = checkOrientation;
        
        // ç›‘å¬æ¸¸æˆå¯èƒ½çš„é‡ç½®äº‹ä»¶
        window.addEventListener('gameReset', function() {
          checkOrientation();
        });
      });
    </script>
  </body>
</html>